<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Tidy Work in Tidyverse</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<link id="font-awesome-1-attachment" rel="attachment" href="site_libs/font-awesome-5.1.0/fonts/fontawesome-webfont.ttf"/>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="assets/lab.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "Óâô";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "Óâô";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
#TOC {
  display: none !important;
}
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><img src="assets/logo.svg" id="logo" style="height:22px;margin:0;"/></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="home_schedule.html">Schedule</a>
</li>
<li>
  <a href="home_content.html">Content</a>
</li>
<li>
  <a href="home_precourse.html">Precourse</a>
</li>
<li>
  <a href="home_info.html">Info</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Tidy Work in Tidyverse</h1>
<h3 class="subtitle">R Programming Foundation for Life Scientists</h3>

</div>


<!-- rmd lab header -->
<p><br></p>
<div id="introduction" class="section level1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<p>Welcome to the hands-on workshop ‚ÄúTidy Work in Tidyverse‚Äù. Most of the things necessary to complete the tutorials and challenges were covered in the lecture. However, sometimes the tasks require that you check the docs or search online. Not all our solutions are optimal. Let us know if you can do better or solve things in a different way. If stuck, look at hints, next google and if still stuck, turn to TA. It is a lot of material, do not fee bad if you do not solve all tasks. Good luck!</p>
</div>
<div id="pipes" class="section level1">
<h1><span class="header-section-number">2</span> Pipes</h1>
<ul>
<li>Rewrite the following code chunk as one pipe (<code>magrittr</code>):</li>
</ul>
<pre class="r"><code>my_cars &lt;- mtcars[, c(1:4, 7)]
my_cars &lt;- my_cars[my_cars$disp &gt; mean(my_cars$disp), ]
print(my_cars)
my_cars &lt;- colMeans(my_cars)</code></pre>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608355797" aria-expanded="false" aria-controls="acc2020101608355797">
</button>
</p>
<div id="acc2020101608355797" class="collapse">
<div class="card card-body">
<pre class="r"><code>my_cars &lt;- mtcars %&gt;%
  select(c(1:4, 7)) %&gt;%
  filter(disp &gt; mean(disp)) %T&gt;%
  print() %&gt;%
  colMeans()</code></pre>
</div>
</div>
<ul>
<li>Rewrite the correlations below using pipes.</li>
</ul>
<pre class="r"><code>cor(mtcars)</code></pre>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608354000" aria-expanded="false" aria-controls="acc2020101608354000">
</button>
</p>
<div id="acc2020101608354000" class="collapse">
<div class="card card-body">
<pre class="r"><code>mtcars %&gt;% cor()</code></pre>
</div>
</div>
<pre class="r"><code>cor(mtcars$gear, mtcars$mpg)</code></pre>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608352644" aria-expanded="false" aria-controls="acc2020101608352644">
</button>
</p>
<div id="acc2020101608352644" class="collapse">
<div class="card card-body">
<pre class="r"><code>mtcars %$% cor(gear, mpg)</code></pre>
</div>
</div>
</div>
<div id="tibbles" class="section level1">
<h1><span class="header-section-number">3</span> Tibbles</h1>
<ul>
<li>Convert the <code>mtcars</code> dataset to a tibble <code>vehicles</code>.</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608352515" aria-expanded="false" aria-controls="acc2020101608352515">
</button>
</p>
<div id="acc2020101608352515" class="collapse">
<div class="card card-body">
<pre class="r"><code>vehicles &lt;- mtcars %&gt;% as_tibble()</code></pre>
</div>
</div>
<ul>
<li>Select the number of cylinders (<code>cyl</code>) variable using:
<ul>
<li>the <code>[[index]]</code> accessor,</li>
<li>the <code>[[string]]</code> accessor,</li>
<li>the <code>$</code> accessor.</li>
</ul></li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608352365" aria-expanded="false" aria-controls="acc2020101608352365">
</button>
</p>
<div id="acc2020101608352365" class="collapse">
<div class="card card-body">
<pre class="r"><code>vehicles[[&#39;cyl&#39;]]
vehicles[[2]]
vehicles$cyl</code></pre>
<pre><code>##  [1] 6 6 4 6 8 6 8 4 4 6 6 8 8 8 8 8 8 4 4 4 4 8 8 8 8 4 4 4 8 6 8 4
##  [1] 6 6 4 6 8 6 8 4 4 6 6 8 8 8 8 8 8 4 4 4 4 8 8 8 8 4 4 4 8 6 8 4
##  [1] 6 6 4 6 8 6 8 4 4 6 6 8 8 8 8 8 8 4 4 4 4 8 8 8 8 4 4 4 8 6 8 4</code></pre>
</div>
</div>
<ul>
<li>Do the same selection as above, but using pipe and placeholders (use all three ways of accessing a variable).</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608359314" aria-expanded="false" aria-controls="acc2020101608359314">
</button>
</p>
<div id="acc2020101608359314" class="collapse">
<div class="card card-body">
<pre class="r"><code>vehicles %T&gt;%
  {print(.[[&#39;cyl&#39;]])} %T&gt;%
  {print(.[[2]])} %&gt;%
  .$cyl</code></pre>
<pre><code>##  [1] 6 6 4 6 8 6 8 4 4 6 6 8 8 8 8 8 8 4 4 4 4 8 8 8 8 4 4 4 8 6 8 4
##  [1] 6 6 4 6 8 6 8 4 4 6 6 8 8 8 8 8 8 4 4 4 4 8 8 8 8 4 4 4 8 6 8 4
##  [1] 6 6 4 6 8 6 8 4 4 6 6 8 8 8 8 8 8 4 4 4 4 8 8 8 8 4 4 4 8 6 8 4</code></pre>
</div>
</div>
<ul>
<li>Print the tibble.</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608357518" aria-expanded="false" aria-controls="acc2020101608357518">
</button>
</p>
<div id="acc2020101608357518" class="collapse">
<div class="card card-body">
<pre class="r"><code>vehicles</code></pre>
<pre><code>## [90m# A tibble: 32 x 11[39m
##      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##    [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m
## [90m 1[39m  21       6  160    110  3.9   2.62  16.5     0     1     4     4
## [90m 2[39m  21       6  160    110  3.9   2.88  17.0     0     1     4     4
## [90m 3[39m  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1
## [90m 4[39m  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1
## [90m 5[39m  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2
## [90m 6[39m  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1
## [90m 7[39m  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4
## [90m 8[39m  24.4     4  147.    62  3.69  3.19  20       1     0     4     2
## [90m 9[39m  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2
## [90m10[39m  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4
## [90m# ‚Ä¶ with 22 more rows[39m</code></pre>
</div>
</div>
<ul>
<li>Print the 30 first rows of the tibble.</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608357952" aria-expanded="false" aria-controls="acc2020101608357952">
</button>
</p>
<div id="acc2020101608357952" class="collapse">
<div class="card card-body">
<pre class="r"><code>vehicles %&gt;% head(n = 30)</code></pre>
<pre><code>## [90m# A tibble: 30 x 11[39m
##      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##    [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m
## [90m 1[39m  21       6  160    110  3.9   2.62  16.5     0     1     4     4
## [90m 2[39m  21       6  160    110  3.9   2.88  17.0     0     1     4     4
## [90m 3[39m  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1
## [90m 4[39m  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1
## [90m 5[39m  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2
## [90m 6[39m  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1
## [90m 7[39m  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4
## [90m 8[39m  24.4     4  147.    62  3.69  3.19  20       1     0     4     2
## [90m 9[39m  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2
## [90m10[39m  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4
## [90m# ‚Ä¶ with 20 more rows[39m</code></pre>
</div>
</div>
<ul>
<li>Change the default behaviour of printing a tibble so that at least 15 and at most 30 rows are printed.</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608354204" aria-expanded="false" aria-controls="acc2020101608354204">
</button>
</p>
<div id="acc2020101608354204" class="collapse">
<div class="card card-body">
<pre class="r"><code>options(tibble.print_min = 15, tibble.print_max = 30)</code></pre>
</div>
</div>
<ul>
<li>Convert <code>vehicles</code> back to a <code>data.frame</code> called <code>automobiles</code>.</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608357446" aria-expanded="false" aria-controls="acc2020101608357446">
</button>
</p>
<div id="acc2020101608357446" class="collapse">
<div class="card card-body">
<pre class="r"><code>automobiles &lt;- as.data.frame(vehicles)</code></pre>
</div>
</div>
<p>Do you think tibbles are lazy? Try to create a tibble that tests whether <em>lazy evaluation</em> applies to tibbles too.</p>
<pre class="r"><code>tibble(x = sample(1:10, size = 10, replace = T), y = log10(x))</code></pre>
</div>
<div id="nyc-flights-challenge" class="section level1">
<h1><span class="header-section-number">4</span> NYC flights Challenge</h1>
<p>The <code>nycflights13</code> package contains information about all flights that departed from NYC (i.e., EWR, JFK and LGA) in 2013: 336,776 flights with 16 variables. To help understand what causes delays, it also includes a number of other useful datasets: weather, planes, airports, airlines. We will use it to train working with tibbles and <code>dplyr</code>.</p>
<div id="selecting-columns" class="section level2">
<h2><span class="header-section-number">4.1</span> Selecting columns</h2>
<ul>
<li>Load the <code>nycflights13</code> package (install if necessary)</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608359494" aria-expanded="false" aria-controls="acc2020101608359494">
</button>
</p>
<div id="acc2020101608359494" class="collapse">
<div class="card card-body">
<pre class="r"><code>install.packages(&#39;nycflights13&#39;)
library(nycflights13)</code></pre>
</div>
</div>
<ul>
<li>Read about the data in the package docs</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608357260" aria-expanded="false" aria-controls="acc2020101608357260">
</button>
</p>
<div id="acc2020101608357260" class="collapse">
<div class="card card-body">
<pre class="r"><code>?nycflights13</code></pre>
<pre><code>## No documentation for &#39;nycflights13&#39; in specified packages and libraries:
## you could try &#39;??nycflights13&#39;</code></pre>
</div>
</div>
<ul>
<li>Inspect the <code>flights</code> tibble.</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608358829" aria-expanded="false" aria-controls="acc2020101608358829">
</button>
</p>
<div id="acc2020101608358829" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights</code></pre>
<pre><code>## [90m# A tibble: 336,776 x 19[39m
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m     [3m[90m&lt;dbl&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m
## [90m 1[39m  [4m2[24m013     1     1      517            515         2      830            819
## [90m 2[39m  [4m2[24m013     1     1      533            529         4      850            830
## [90m 3[39m  [4m2[24m013     1     1      542            540         2      923            850
## [90m 4[39m  [4m2[24m013     1     1      544            545        -[31m1[39m     [4m1[24m004           [4m1[24m022
## [90m 5[39m  [4m2[24m013     1     1      554            600        -[31m6[39m      812            837
## [90m 6[39m  [4m2[24m013     1     1      554            558        -[31m4[39m      740            728
## [90m 7[39m  [4m2[24m013     1     1      555            600        -[31m5[39m      913            854
## [90m 8[39m  [4m2[24m013     1     1      557            600        -[31m3[39m      709            723
## [90m 9[39m  [4m2[24m013     1     1      557            600        -[31m3[39m      838            846
## [90m10[39m  [4m2[24m013     1     1      558            600        -[31m2[39m      753            745
## [90m11[39m  [4m2[24m013     1     1      558            600        -[31m2[39m      849            851
## [90m12[39m  [4m2[24m013     1     1      558            600        -[31m2[39m      853            856
## [90m13[39m  [4m2[24m013     1     1      558            600        -[31m2[39m      924            917
## [90m14[39m  [4m2[24m013     1     1      558            600        -[31m2[39m      923            937
## [90m15[39m  [4m2[24m013     1     1      559            600        -[31m1[39m      941            910
## [90m# ‚Ä¶ with 336,761 more rows, and 11 more variables: arr_delay [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   carrier [3m[90m&lt;chr&gt;[90m[23m, flight [3m[90m&lt;int&gt;[90m[23m, tailnum [3m[90m&lt;chr&gt;[90m[23m, origin [3m[90m&lt;chr&gt;[90m[23m, dest [3m[90m&lt;chr&gt;[90m[23m,[39m
## [90m#   air_time [3m[90m&lt;dbl&gt;[90m[23m, distance [3m[90m&lt;dbl&gt;[90m[23m, hour [3m[90m&lt;dbl&gt;[90m[23m, minute [3m[90m&lt;dbl&gt;[90m[23m, time_hour [3m[90m&lt;dttm&gt;[90m[23m[39m</code></pre>
</div>
</div>
<ul>
<li>Select all columns but <code>carrier</code> and <code>arr_time</code></li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608356747" aria-expanded="false" aria-controls="acc2020101608356747">
</button>
</p>
<div id="acc2020101608356747" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;% select(-carrier, -arr_time)</code></pre>
<pre><code>## [90m# A tibble: 336,776 x 17[39m
##     year month   day dep_time sched_dep_time dep_delay sched_arr_time arr_delay
##    [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m     [3m[90m&lt;dbl&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m     [3m[90m&lt;dbl&gt;[39m[23m
## [90m 1[39m  [4m2[24m013     1     1      517            515         2            819        11
## [90m 2[39m  [4m2[24m013     1     1      533            529         4            830        20
## [90m 3[39m  [4m2[24m013     1     1      542            540         2            850        33
## [90m 4[39m  [4m2[24m013     1     1      544            545        -[31m1[39m           [4m1[24m022       -[31m18[39m
## [90m 5[39m  [4m2[24m013     1     1      554            600        -[31m6[39m            837       -[31m25[39m
## [90m 6[39m  [4m2[24m013     1     1      554            558        -[31m4[39m            728        12
## [90m 7[39m  [4m2[24m013     1     1      555            600        -[31m5[39m            854        19
## [90m 8[39m  [4m2[24m013     1     1      557            600        -[31m3[39m            723       -[31m14[39m
## [90m 9[39m  [4m2[24m013     1     1      557            600        -[31m3[39m            846        -[31m8[39m
## [90m10[39m  [4m2[24m013     1     1      558            600        -[31m2[39m            745         8
## [90m11[39m  [4m2[24m013     1     1      558            600        -[31m2[39m            851        -[31m2[39m
## [90m12[39m  [4m2[24m013     1     1      558            600        -[31m2[39m            856        -[31m3[39m
## [90m13[39m  [4m2[24m013     1     1      558            600        -[31m2[39m            917         7
## [90m14[39m  [4m2[24m013     1     1      558            600        -[31m2[39m            937       -[31m14[39m
## [90m15[39m  [4m2[24m013     1     1      559            600        -[31m1[39m            910        31
## [90m# ‚Ä¶ with 336,761 more rows, and 9 more variables: flight [3m[90m&lt;int&gt;[90m[23m, tailnum [3m[90m&lt;chr&gt;[90m[23m,[39m
## [90m#   origin [3m[90m&lt;chr&gt;[90m[23m, dest [3m[90m&lt;chr&gt;[90m[23m, air_time [3m[90m&lt;dbl&gt;[90m[23m, distance [3m[90m&lt;dbl&gt;[90m[23m, hour [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   minute [3m[90m&lt;dbl&gt;[90m[23m, time_hour [3m[90m&lt;dttm&gt;[90m[23m[39m</code></pre>
</div>
</div>
<ul>
<li>Select <code>carrier</code>, <code>tailnum</code> and <code>origin</code></li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608359039" aria-expanded="false" aria-controls="acc2020101608359039">
</button>
</p>
<div id="acc2020101608359039" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;% select(carrier, tailnum, origin)</code></pre>
<pre><code>## [90m# A tibble: 336,776 x 3[39m
##    carrier tailnum origin
##    [3m[90m&lt;chr&gt;[39m[23m   [3m[90m&lt;chr&gt;[39m[23m   [3m[90m&lt;chr&gt;[39m[23m 
## [90m 1[39m UA      N14228  EWR   
## [90m 2[39m UA      N24211  LGA   
## [90m 3[39m AA      N619AA  JFK   
## [90m 4[39m B6      N804JB  JFK   
## [90m 5[39m DL      N668DN  LGA   
## [90m 6[39m UA      N39463  EWR   
## [90m 7[39m B6      N516JB  EWR   
## [90m 8[39m EV      N829AS  LGA   
## [90m 9[39m B6      N593JB  JFK   
## [90m10[39m AA      N3ALAA  LGA   
## [90m11[39m B6      N793JB  JFK   
## [90m12[39m B6      N657JB  JFK   
## [90m13[39m UA      N29129  JFK   
## [90m14[39m UA      N53441  EWR   
## [90m15[39m AA      N3DUAA  LGA   
## [90m# ‚Ä¶ with 336,761 more rows[39m</code></pre>
</div>
</div>
<ul>
<li>Hide columns from <code>day</code> through <code>carrier</code></li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608357668" aria-expanded="false" aria-controls="acc2020101608357668">
</button>
</p>
<div id="acc2020101608357668" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;% select(-(day:carrier))</code></pre>
<pre><code>## [90m# A tibble: 336,776 x 11[39m
##     year month flight tailnum origin dest  air_time distance  hour minute
##    [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m  [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;chr&gt;[39m[23m   [3m[90m&lt;chr&gt;[39m[23m  [3m[90m&lt;chr&gt;[39m[23m    [3m[90m&lt;dbl&gt;[39m[23m    [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m  [3m[90m&lt;dbl&gt;[39m[23m
## [90m 1[39m  [4m2[24m013     1   [4m1[24m545 N14228  EWR    IAH        227     [4m1[24m400     5     15
## [90m 2[39m  [4m2[24m013     1   [4m1[24m714 N24211  LGA    IAH        227     [4m1[24m416     5     29
## [90m 3[39m  [4m2[24m013     1   [4m1[24m141 N619AA  JFK    MIA        160     [4m1[24m089     5     40
## [90m 4[39m  [4m2[24m013     1    725 N804JB  JFK    BQN        183     [4m1[24m576     5     45
## [90m 5[39m  [4m2[24m013     1    461 N668DN  LGA    ATL        116      762     6      0
## [90m 6[39m  [4m2[24m013     1   [4m1[24m696 N39463  EWR    ORD        150      719     5     58
## [90m 7[39m  [4m2[24m013     1    507 N516JB  EWR    FLL        158     [4m1[24m065     6      0
## [90m 8[39m  [4m2[24m013     1   [4m5[24m708 N829AS  LGA    IAD         53      229     6      0
## [90m 9[39m  [4m2[24m013     1     79 N593JB  JFK    MCO        140      944     6      0
## [90m10[39m  [4m2[24m013     1    301 N3ALAA  LGA    ORD        138      733     6      0
## [90m11[39m  [4m2[24m013     1     49 N793JB  JFK    PBI        149     [4m1[24m028     6      0
## [90m12[39m  [4m2[24m013     1     71 N657JB  JFK    TPA        158     [4m1[24m005     6      0
## [90m13[39m  [4m2[24m013     1    194 N29129  JFK    LAX        345     [4m2[24m475     6      0
## [90m14[39m  [4m2[24m013     1   [4m1[24m124 N53441  EWR    SFO        361     [4m2[24m565     6      0
## [90m15[39m  [4m2[24m013     1    707 N3DUAA  LGA    DFW        257     [4m1[24m389     6      0
## [90m# ‚Ä¶ with 336,761 more rows, and 1 more variable: time_hour [3m[90m&lt;dttm&gt;[90m[23m[39m</code></pre>
</div>
</div>
<ul>
<li>Select all columns that have to do with <code>arr</code>ival (hint: <code>?tidyselect</code>)</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608358065" aria-expanded="false" aria-controls="acc2020101608358065">
</button>
</p>
<div id="acc2020101608358065" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;% select(contains(&#39;arr_&#39;))</code></pre>
<pre><code>## [90m# A tibble: 336,776 x 3[39m
##    arr_time sched_arr_time arr_delay
##       [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m     [3m[90m&lt;dbl&gt;[39m[23m
## [90m 1[39m      830            819        11
## [90m 2[39m      850            830        20
## [90m 3[39m      923            850        33
## [90m 4[39m     [4m1[24m004           [4m1[24m022       -[31m18[39m
## [90m 5[39m      812            837       -[31m25[39m
## [90m 6[39m      740            728        12
## [90m 7[39m      913            854        19
## [90m 8[39m      709            723       -[31m14[39m
## [90m 9[39m      838            846        -[31m8[39m
## [90m10[39m      753            745         8
## [90m11[39m      849            851        -[31m2[39m
## [90m12[39m      853            856        -[31m3[39m
## [90m13[39m      924            917         7
## [90m14[39m      923            937       -[31m14[39m
## [90m15[39m      941            910        31
## [90m# ‚Ä¶ with 336,761 more rows[39m</code></pre>
</div>
</div>
<ul>
<li>Select columns based on a vector <code>v &lt;- c("arr_time", "sched_arr_time", "arr_delay")</code></li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608355553" aria-expanded="false" aria-controls="acc2020101608355553">
</button>
</p>
<div id="acc2020101608355553" class="collapse">
<div class="card card-body">
<pre class="r"><code>v &lt;- c(&quot;arr_time&quot;, &quot;sched_arr_time&quot;, &quot;arr_delay&quot;)
flights %&gt;% select(v) # or
flights %&gt;% select(one_of(v))</code></pre>
<pre><code>## [90m# A tibble: 336,776 x 3[39m
##    arr_time sched_arr_time arr_delay
##       [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m     [3m[90m&lt;dbl&gt;[39m[23m
## [90m 1[39m      830            819        11
## [90m 2[39m      850            830        20
## [90m 3[39m      923            850        33
## [90m 4[39m     [4m1[24m004           [4m1[24m022       -[31m18[39m
## [90m 5[39m      812            837       -[31m25[39m
## [90m 6[39m      740            728        12
## [90m 7[39m      913            854        19
## [90m 8[39m      709            723       -[31m14[39m
## [90m 9[39m      838            846        -[31m8[39m
## [90m10[39m      753            745         8
## [90m11[39m      849            851        -[31m2[39m
## [90m12[39m      853            856        -[31m3[39m
## [90m13[39m      924            917         7
## [90m14[39m      923            937       -[31m14[39m
## [90m15[39m      941            910        31
## [90m# ‚Ä¶ with 336,761 more rows[39m
## [90m# A tibble: 336,776 x 3[39m
##    arr_time sched_arr_time arr_delay
##       [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m     [3m[90m&lt;dbl&gt;[39m[23m
## [90m 1[39m      830            819        11
## [90m 2[39m      850            830        20
## [90m 3[39m      923            850        33
## [90m 4[39m     [4m1[24m004           [4m1[24m022       -[31m18[39m
## [90m 5[39m      812            837       -[31m25[39m
## [90m 6[39m      740            728        12
## [90m 7[39m      913            854        19
## [90m 8[39m      709            723       -[31m14[39m
## [90m 9[39m      838            846        -[31m8[39m
## [90m10[39m      753            745         8
## [90m11[39m      849            851        -[31m2[39m
## [90m12[39m      853            856        -[31m3[39m
## [90m13[39m      924            917         7
## [90m14[39m      923            937       -[31m14[39m
## [90m15[39m      941            910        31
## [90m# ‚Ä¶ with 336,761 more rows[39m</code></pre>
</div>
</div>
<ul>
<li>Rename column <code>dest</code> to <code>destination</code> using <code>select()</code> and <code>rename()</code>. What is the difference between the two approaches?</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608369515" aria-expanded="false" aria-controls="acc2020101608369515">
</button>
</p>
<div id="acc2020101608369515" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;% select(destination = dest) %&gt;% head()
flights %&gt;% rename(destination = dest) %&gt;% head()
# select keeps only the renamed column while rename returns the whole dataset
# with the column renamed</code></pre>
<pre><code>## [90m# A tibble: 6 x 1[39m
##   destination
##   [3m[90m&lt;chr&gt;[39m[23m      
## [90m1[39m IAH        
## [90m2[39m IAH        
## [90m3[39m MIA        
## [90m4[39m BQN        
## [90m5[39m ATL        
## [90m6[39m ORD        
## [90m# A tibble: 6 x 19[39m
##    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##   [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m     [3m[90m&lt;dbl&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m
## [90m1[39m  [4m2[24m013     1     1      517            515         2      830            819
## [90m2[39m  [4m2[24m013     1     1      533            529         4      850            830
## [90m3[39m  [4m2[24m013     1     1      542            540         2      923            850
## [90m4[39m  [4m2[24m013     1     1      544            545        -[31m1[39m     [4m1[24m004           [4m1[24m022
## [90m5[39m  [4m2[24m013     1     1      554            600        -[31m6[39m      812            837
## [90m6[39m  [4m2[24m013     1     1      554            558        -[31m4[39m      740            728
## [90m# ‚Ä¶ with 11 more variables: arr_delay [3m[90m&lt;dbl&gt;[90m[23m, carrier [3m[90m&lt;chr&gt;[90m[23m, flight [3m[90m&lt;int&gt;[90m[23m,[39m
## [90m#   tailnum [3m[90m&lt;chr&gt;[90m[23m, origin [3m[90m&lt;chr&gt;[90m[23m, destination [3m[90m&lt;chr&gt;[90m[23m, air_time [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   distance [3m[90m&lt;dbl&gt;[90m[23m, hour [3m[90m&lt;dbl&gt;[90m[23m, minute [3m[90m&lt;dbl&gt;[90m[23m, time_hour [3m[90m&lt;dttm&gt;[90m[23m[39m</code></pre>
</div>
</div>
</div>
<div id="filtering-rows" class="section level2">
<h2><span class="header-section-number">4.2</span> Filtering rows</h2>
<ul>
<li>Filter only the flights that arrived ahead of schedule</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608362489" aria-expanded="false" aria-controls="acc2020101608362489">
</button>
</p>
<div id="acc2020101608362489" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;% filter(arr_delay &lt; 0)</code></pre>
<pre><code>## [90m# A tibble: 188,933 x 19[39m
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m     [3m[90m&lt;dbl&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m
## [90m 1[39m  [4m2[24m013     1     1      544            545        -[31m1[39m     [4m1[24m004           [4m1[24m022
## [90m 2[39m  [4m2[24m013     1     1      554            600        -[31m6[39m      812            837
## [90m 3[39m  [4m2[24m013     1     1      557            600        -[31m3[39m      709            723
## [90m 4[39m  [4m2[24m013     1     1      557            600        -[31m3[39m      838            846
## [90m 5[39m  [4m2[24m013     1     1      558            600        -[31m2[39m      849            851
## [90m 6[39m  [4m2[24m013     1     1      558            600        -[31m2[39m      853            856
## [90m 7[39m  [4m2[24m013     1     1      558            600        -[31m2[39m      923            937
## [90m 8[39m  [4m2[24m013     1     1      559            559         0      702            706
## [90m 9[39m  [4m2[24m013     1     1      559            600        -[31m1[39m      854            902
## [90m10[39m  [4m2[24m013     1     1      600            600         0      851            858
## [90m11[39m  [4m2[24m013     1     1      601            600         1      844            850
## [90m12[39m  [4m2[24m013     1     1      602            610        -[31m8[39m      812            820
## [90m13[39m  [4m2[24m013     1     1      606            610        -[31m4[39m      858            910
## [90m14[39m  [4m2[24m013     1     1      606            610        -[31m4[39m      837            845
## [90m15[39m  [4m2[24m013     1     1      607            607         0      858            915
## [90m# ‚Ä¶ with 188,918 more rows, and 11 more variables: arr_delay [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   carrier [3m[90m&lt;chr&gt;[90m[23m, flight [3m[90m&lt;int&gt;[90m[23m, tailnum [3m[90m&lt;chr&gt;[90m[23m, origin [3m[90m&lt;chr&gt;[90m[23m, dest [3m[90m&lt;chr&gt;[90m[23m,[39m
## [90m#   air_time [3m[90m&lt;dbl&gt;[90m[23m, distance [3m[90m&lt;dbl&gt;[90m[23m, hour [3m[90m&lt;dbl&gt;[90m[23m, minute [3m[90m&lt;dbl&gt;[90m[23m, time_hour [3m[90m&lt;dttm&gt;[90m[23m[39m</code></pre>
</div>
</div>
<ul>
<li>Filter the flights that had departure delay between 10 and 33</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608360627" aria-expanded="false" aria-controls="acc2020101608360627">
</button>
</p>
<div id="acc2020101608360627" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;% filter(dep_delay &gt;= 10, dep_delay &lt;= 33) # or
flights %&gt;% filter(between(dep_delay, 10, 33))</code></pre>
<pre><code>## [90m# A tibble: 40,558 x 19[39m
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m     [3m[90m&lt;dbl&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m
## [90m 1[39m  [4m2[24m013     1     1      611            600        11      945            931
## [90m 2[39m  [4m2[24m013     1     1      623            610        13      920            915
## [90m 3[39m  [4m2[24m013     1     1      632            608        24      740            728
## [90m 4[39m  [4m2[24m013     1     1      743            730        13     [4m1[24m107           [4m1[24m100
## [90m 5[39m  [4m2[24m013     1     1      743            730        13     [4m1[24m059           [4m1[24m056
## [90m 6[39m  [4m2[24m013     1     1      851            840        11     [4m1[24m215           [4m1[24m206
## [90m 7[39m  [4m2[24m013     1     1      906            843        23     [4m1[24m134           [4m1[24m125
## [90m 8[39m  [4m2[24m013     1     1      912            900        12     [4m1[24m241           [4m1[24m220
## [90m 9[39m  [4m2[24m013     1     1      914            900        14     [4m1[24m058           [4m1[24m043
## [90m10[39m  [4m2[24m013     1     1      920            905        15     [4m1[24m039           [4m1[24m025
## [90m11[39m  [4m2[24m013     1     1      921            900        21     [4m1[24m237           [4m1[24m227
## [90m12[39m  [4m2[24m013     1     1      930            905        25     [4m1[24m218           [4m1[24m209
## [90m13[39m  [4m2[24m013     1     1      933            904        29     [4m1[24m252           [4m1[24m210
## [90m14[39m  [4m2[24m013     1     1      953            921        32     [4m1[24m320           [4m1[24m241
## [90m15[39m  [4m2[24m013     1     1     [4m1[24m011           [4m1[24m001        10     [4m1[24m133           [4m1[24m128
## [90m# ‚Ä¶ with 40,543 more rows, and 11 more variables: arr_delay [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   carrier [3m[90m&lt;chr&gt;[90m[23m, flight [3m[90m&lt;int&gt;[90m[23m, tailnum [3m[90m&lt;chr&gt;[90m[23m, origin [3m[90m&lt;chr&gt;[90m[23m, dest [3m[90m&lt;chr&gt;[90m[23m,[39m
## [90m#   air_time [3m[90m&lt;dbl&gt;[90m[23m, distance [3m[90m&lt;dbl&gt;[90m[23m, hour [3m[90m&lt;dbl&gt;[90m[23m, minute [3m[90m&lt;dbl&gt;[90m[23m, time_hour [3m[90m&lt;dttm&gt;[90m[23m[39m
## [90m# A tibble: 40,558 x 19[39m
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m     [3m[90m&lt;dbl&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m
## [90m 1[39m  [4m2[24m013     1     1      611            600        11      945            931
## [90m 2[39m  [4m2[24m013     1     1      623            610        13      920            915
## [90m 3[39m  [4m2[24m013     1     1      632            608        24      740            728
## [90m 4[39m  [4m2[24m013     1     1      743            730        13     [4m1[24m107           [4m1[24m100
## [90m 5[39m  [4m2[24m013     1     1      743            730        13     [4m1[24m059           [4m1[24m056
## [90m 6[39m  [4m2[24m013     1     1      851            840        11     [4m1[24m215           [4m1[24m206
## [90m 7[39m  [4m2[24m013     1     1      906            843        23     [4m1[24m134           [4m1[24m125
## [90m 8[39m  [4m2[24m013     1     1      912            900        12     [4m1[24m241           [4m1[24m220
## [90m 9[39m  [4m2[24m013     1     1      914            900        14     [4m1[24m058           [4m1[24m043
## [90m10[39m  [4m2[24m013     1     1      920            905        15     [4m1[24m039           [4m1[24m025
## [90m11[39m  [4m2[24m013     1     1      921            900        21     [4m1[24m237           [4m1[24m227
## [90m12[39m  [4m2[24m013     1     1      930            905        25     [4m1[24m218           [4m1[24m209
## [90m13[39m  [4m2[24m013     1     1      933            904        29     [4m1[24m252           [4m1[24m210
## [90m14[39m  [4m2[24m013     1     1      953            921        32     [4m1[24m320           [4m1[24m241
## [90m15[39m  [4m2[24m013     1     1     [4m1[24m011           [4m1[24m001        10     [4m1[24m133           [4m1[24m128
## [90m# ‚Ä¶ with 40,543 more rows, and 11 more variables: arr_delay [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   carrier [3m[90m&lt;chr&gt;[90m[23m, flight [3m[90m&lt;int&gt;[90m[23m, tailnum [3m[90m&lt;chr&gt;[90m[23m, origin [3m[90m&lt;chr&gt;[90m[23m, dest [3m[90m&lt;chr&gt;[90m[23m,[39m
## [90m#   air_time [3m[90m&lt;dbl&gt;[90m[23m, distance [3m[90m&lt;dbl&gt;[90m[23m, hour [3m[90m&lt;dbl&gt;[90m[23m, minute [3m[90m&lt;dbl&gt;[90m[23m, time_hour [3m[90m&lt;dttm&gt;[90m[23m[39m</code></pre>
</div>
</div>
<ul>
<li>Fish out all flights with unknown arrival time</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608362459" aria-expanded="false" aria-controls="acc2020101608362459">
</button>
</p>
<div id="acc2020101608362459" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;% filter(is.na(arr_time))</code></pre>
<pre><code>## [90m# A tibble: 8,713 x 19[39m
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m     [3m[90m&lt;dbl&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m
## [90m 1[39m  [4m2[24m013     1     1     [4m2[24m016           [4m1[24m930        46       [31mNA[39m           [4m2[24m220
## [90m 2[39m  [4m2[24m013     1     1       [31mNA[39m           [4m1[24m630        [31mNA[39m       [31mNA[39m           [4m1[24m815
## [90m 3[39m  [4m2[24m013     1     1       [31mNA[39m           [4m1[24m935        [31mNA[39m       [31mNA[39m           [4m2[24m240
## [90m 4[39m  [4m2[24m013     1     1       [31mNA[39m           [4m1[24m500        [31mNA[39m       [31mNA[39m           [4m1[24m825
## [90m 5[39m  [4m2[24m013     1     1       [31mNA[39m            600        [31mNA[39m       [31mNA[39m            901
## [90m 6[39m  [4m2[24m013     1     2     [4m2[24m041           [4m2[24m045        -[31m4[39m       [31mNA[39m           [4m2[24m359
## [90m 7[39m  [4m2[24m013     1     2     [4m2[24m145           [4m2[24m129        16       [31mNA[39m             33
## [90m 8[39m  [4m2[24m013     1     2       [31mNA[39m           [4m1[24m540        [31mNA[39m       [31mNA[39m           [4m1[24m747
## [90m 9[39m  [4m2[24m013     1     2       [31mNA[39m           [4m1[24m620        [31mNA[39m       [31mNA[39m           [4m1[24m746
## [90m10[39m  [4m2[24m013     1     2       [31mNA[39m           [4m1[24m355        [31mNA[39m       [31mNA[39m           [4m1[24m459
## [90m11[39m  [4m2[24m013     1     2       [31mNA[39m           [4m1[24m420        [31mNA[39m       [31mNA[39m           [4m1[24m644
## [90m12[39m  [4m2[24m013     1     2       [31mNA[39m           [4m1[24m321        [31mNA[39m       [31mNA[39m           [4m1[24m536
## [90m13[39m  [4m2[24m013     1     2       [31mNA[39m           [4m1[24m545        [31mNA[39m       [31mNA[39m           [4m1[24m910
## [90m14[39m  [4m2[24m013     1     2       [31mNA[39m           [4m1[24m330        [31mNA[39m       [31mNA[39m           [4m1[24m640
## [90m15[39m  [4m2[24m013     1     2       [31mNA[39m           [4m1[24m601        [31mNA[39m       [31mNA[39m           [4m1[24m735
## [90m# ‚Ä¶ with 8,698 more rows, and 11 more variables: arr_delay [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   carrier [3m[90m&lt;chr&gt;[90m[23m, flight [3m[90m&lt;int&gt;[90m[23m, tailnum [3m[90m&lt;chr&gt;[90m[23m, origin [3m[90m&lt;chr&gt;[90m[23m, dest [3m[90m&lt;chr&gt;[90m[23m,[39m
## [90m#   air_time [3m[90m&lt;dbl&gt;[90m[23m, distance [3m[90m&lt;dbl&gt;[90m[23m, hour [3m[90m&lt;dbl&gt;[90m[23m, minute [3m[90m&lt;dbl&gt;[90m[23m, time_hour [3m[90m&lt;dttm&gt;[90m[23m[39m</code></pre>
</div>
</div>
<ul>
<li>Retrieve rows 1234:1258 (hint: <code>?slice</code>)</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608365978" aria-expanded="false" aria-controls="acc2020101608365978">
</button>
</p>
<div id="acc2020101608365978" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;% slice(1234:1258)</code></pre>
<pre><code>## [90m# A tibble: 25 x 19[39m
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m     [3m[90m&lt;dbl&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m
## [90m 1[39m  [4m2[24m013     1     2     [4m1[24m236           [4m1[24m238        -[31m2[39m     [4m1[24m446           [4m1[24m446
## [90m 2[39m  [4m2[24m013     1     2     [4m1[24m236           [4m1[24m240        -[31m4[39m     [4m1[24m403           [4m1[24m405
## [90m 3[39m  [4m2[24m013     1     2     [4m1[24m236           [4m1[24m200        36     [4m1[24m417           [4m1[24m330
## [90m 4[39m  [4m2[24m013     1     2     [4m1[24m239           [4m1[24m200        39     [4m1[24m429           [4m1[24m342
## [90m 5[39m  [4m2[24m013     1     2     [4m1[24m239           [4m1[24m220        19     [4m1[24m328           [4m1[24m320
## [90m 6[39m  [4m2[24m013     1     2     [4m1[24m240           [4m1[24m245        -[31m5[39m     [4m1[24m538           [4m1[24m600
## [90m 7[39m  [4m2[24m013     1     2     [4m1[24m240           [4m1[24m240         0     [4m1[24m556           [4m1[24m540
## [90m 8[39m  [4m2[24m013     1     2     [4m1[24m240           [4m1[24m245        -[31m5[39m     [4m1[24m521           [4m1[24m616
## [90m 9[39m  [4m2[24m013     1     2     [4m1[24m243           [4m1[24m229        14     [4m1[24m453           [4m1[24m428
## [90m10[39m  [4m2[24m013     1     2     [4m1[24m244            900       224     [4m1[24m431           [4m1[24m104
## [90m11[39m  [4m2[24m013     1     2     [4m1[24m245           [4m1[24m249        -[31m4[39m     [4m1[24m718           [4m1[24m800
## [90m12[39m  [4m2[24m013     1     2     [4m1[24m249           [4m1[24m245         4     [4m1[24m555           [4m1[24m550
## [90m13[39m  [4m2[24m013     1     2     [4m1[24m249           [4m1[24m258        -[31m9[39m     [4m1[24m535           [4m1[24m610
## [90m14[39m  [4m2[24m013     1     2     [4m1[24m250           [4m1[24m245         5     [4m1[24m349           [4m1[24m350
## [90m15[39m  [4m2[24m013     1     2     [4m1[24m251           [4m1[24m250         1     [4m1[24m552           [4m1[24m603
## [90m16[39m  [4m2[24m013     1     2     [4m1[24m253           [4m1[24m300        -[31m7[39m     [4m1[24m505           [4m1[24m508
## [90m17[39m  [4m2[24m013     1     2     [4m1[24m254           [4m1[24m300        -[31m6[39m     [4m1[24m545           [4m1[24m537
## [90m18[39m  [4m2[24m013     1     2     [4m1[24m255           [4m1[24m259        -[31m4[39m     [4m1[24m501           [4m1[24m502
## [90m19[39m  [4m2[24m013     1     2     [4m1[24m256           [4m1[24m252         4     [4m1[24m600           [4m1[24m555
## [90m20[39m  [4m2[24m013     1     2     [4m1[24m256           [4m1[24m300        -[31m4[39m     [4m1[24m526           [4m1[24m518
## [90m21[39m  [4m2[24m013     1     2     [4m1[24m256           [4m1[24m225        31     [4m1[24m409           [4m1[24m345
## [90m22[39m  [4m2[24m013     1     2     [4m1[24m257           [4m1[24m303        -[31m6[39m     [4m1[24m356           [4m1[24m411
## [90m23[39m  [4m2[24m013     1     2     [4m1[24m257           [4m1[24m300        -[31m3[39m     [4m1[24m529           [4m1[24m527
## [90m24[39m  [4m2[24m013     1     2     [4m1[24m257           [4m1[24m257         0     [4m1[24m613           [4m1[24m607
## [90m25[39m  [4m2[24m013     1     2     [4m1[24m258           [4m1[24m255         3     [4m1[24m537           [4m1[24m535
## [90m# ‚Ä¶ with 11 more variables: arr_delay [3m[90m&lt;dbl&gt;[90m[23m, carrier [3m[90m&lt;chr&gt;[90m[23m, flight [3m[90m&lt;int&gt;[90m[23m,[39m
## [90m#   tailnum [3m[90m&lt;chr&gt;[90m[23m, origin [3m[90m&lt;chr&gt;[90m[23m, dest [3m[90m&lt;chr&gt;[90m[23m, air_time [3m[90m&lt;dbl&gt;[90m[23m, distance [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   hour [3m[90m&lt;dbl&gt;[90m[23m, minute [3m[90m&lt;dbl&gt;[90m[23m, time_hour [3m[90m&lt;dttm&gt;[90m[23m[39m</code></pre>
</div>
</div>
<ul>
<li>Sample (<code>?sample_n()</code>) 3 random flights per day in March</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608364082" aria-expanded="false" aria-controls="acc2020101608364082">
</button>
</p>
<div id="acc2020101608364082" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;% filter(month == 3) %&gt;%
  group_by(day) %&gt;%
  sample_n(3)</code></pre>
<pre><code>## [90m# A tibble: 93 x 19[39m
## [90m# Groups:   day [31][39m
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m     [3m[90m&lt;dbl&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m
## [90m 1[39m  [4m2[24m013     3     1     [4m1[24m918           [4m1[24m800        78     [4m2[24m123           [4m2[24m006
## [90m 2[39m  [4m2[24m013     3     1     [4m2[24m111           [4m2[24m100        11     [4m2[24m359             31
## [90m 3[39m  [4m2[24m013     3     1      703            700         3     [4m1[24m006            958
## [90m 4[39m  [4m2[24m013     3     2      625            620         5     [4m1[24m106           [4m1[24m102
## [90m 5[39m  [4m2[24m013     3     2     [4m1[24m324           [4m1[24m327        -[31m3[39m     [4m1[24m407           [4m1[24m423
## [90m 6[39m  [4m2[24m013     3     2     [4m1[24m910           [4m1[24m915        -[31m5[39m     [4m2[24m138           [4m2[24m210
## [90m 7[39m  [4m2[24m013     3     3     [4m1[24m042           [4m1[24m050        -[31m8[39m     [4m1[24m334           [4m1[24m402
## [90m 8[39m  [4m2[24m013     3     3     [4m1[24m457           [4m1[24m500        -[31m3[39m     [4m1[24m737           [4m1[24m759
## [90m 9[39m  [4m2[24m013     3     3     [4m1[24m729           [4m1[24m530       119     [4m2[24m105           [4m1[24m922
## [90m10[39m  [4m2[24m013     3     4     [4m1[24m355           [4m1[24m359        -[31m4[39m     [4m1[24m559           [4m1[24m600
## [90m11[39m  [4m2[24m013     3     4     [4m1[24m142           [4m1[24m146        -[31m4[39m     [4m1[24m354           [4m1[24m418
## [90m12[39m  [4m2[24m013     3     4     [4m1[24m708           [4m1[24m719       -[31m11[39m     [4m2[24m002           [4m1[24m948
## [90m13[39m  [4m2[24m013     3     5     [4m1[24m931           [4m1[24m940        -[31m9[39m     [4m2[24m249           [4m2[24m245
## [90m14[39m  [4m2[24m013     3     5     [4m2[24m030           [4m2[24m030         0     [4m2[24m256           [4m2[24m306
## [90m15[39m  [4m2[24m013     3     5      638            645        -[31m7[39m      855            908
## [90m# ‚Ä¶ with 78 more rows, and 11 more variables: arr_delay [3m[90m&lt;dbl&gt;[90m[23m, carrier [3m[90m&lt;chr&gt;[90m[23m,[39m
## [90m#   flight [3m[90m&lt;int&gt;[90m[23m, tailnum [3m[90m&lt;chr&gt;[90m[23m, origin [3m[90m&lt;chr&gt;[90m[23m, dest [3m[90m&lt;chr&gt;[90m[23m, air_time [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   distance [3m[90m&lt;dbl&gt;[90m[23m, hour [3m[90m&lt;dbl&gt;[90m[23m, minute [3m[90m&lt;dbl&gt;[90m[23m, time_hour [3m[90m&lt;dttm&gt;[90m[23m[39m</code></pre>
</div>
</div>
<ul>
<li>Show 5 most departure-delayed flights in January per carrier</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608364932" aria-expanded="false" aria-controls="acc2020101608364932">
</button>
</p>
<div id="acc2020101608364932" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;%
  filter(month == 1) %&gt;%
  group_by(carrier) %&gt;%
  top_n(5, dep_delay)</code></pre>
<pre><code>## [90m# A tibble: 77 x 19[39m
## [90m# Groups:   carrier [16][39m
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m     [3m[90m&lt;dbl&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m
## [90m 1[39m  [4m2[24m013     1     1      848           [4m1[24m835       853     [4m1[24m001           [4m1[24m950
## [90m 2[39m  [4m2[24m013     1     1     [4m2[24m205           [4m1[24m720       285       46           [4m2[24m040
## [90m 3[39m  [4m2[24m013     1     1     [4m2[24m343           [4m1[24m724       379      314           [4m1[24m938
## [90m 4[39m  [4m2[24m013     1     2     [4m1[24m412            838       334     [4m1[24m710           [4m1[24m147
## [90m 5[39m  [4m2[24m013     1     2     [4m1[24m607           [4m1[24m030       337     [4m2[24m003           [4m1[24m355
## [90m 6[39m  [4m2[24m013     1     2     [4m2[24m131           [4m1[24m512       379     [4m2[24m340           [4m1[24m741
## [90m 7[39m  [4m2[24m013     1     3     [4m1[24m933           [4m1[24m730       123     [4m2[24m131           [4m1[24m953
## [90m 8[39m  [4m2[24m013     1     3     [4m2[24m056           [4m1[24m605       291     [4m2[24m239           [4m1[24m754
## [90m 9[39m  [4m2[24m013     1     4     [4m1[24m731           [4m1[24m602        89     [4m1[24m837           [4m1[24m722
## [90m10[39m  [4m2[24m013     1     4     [4m1[24m831           [4m1[24m730        61     [4m2[24m029           [4m1[24m953
## [90m11[39m  [4m2[24m013     1     5     [4m1[24m344            817       327     [4m1[24m635           [4m1[24m127
## [90m12[39m  [4m2[24m013     1     6     [4m1[24m019            900        79     [4m1[24m558           [4m1[24m530
## [90m13[39m  [4m2[24m013     1     7     [4m1[24m042            900       102     [4m1[24m620           [4m1[24m530
## [90m14[39m  [4m2[24m013     1     7     [4m2[24m021           [4m1[24m415       366     [4m2[24m332           [4m1[24m724
## [90m15[39m  [4m2[24m013     1     9      641            900      [4m1[24m301     [4m1[24m242           [4m1[24m530
## [90m# ‚Ä¶ with 62 more rows, and 11 more variables: arr_delay [3m[90m&lt;dbl&gt;[90m[23m, carrier [3m[90m&lt;chr&gt;[90m[23m,[39m
## [90m#   flight [3m[90m&lt;int&gt;[90m[23m, tailnum [3m[90m&lt;chr&gt;[90m[23m, origin [3m[90m&lt;chr&gt;[90m[23m, dest [3m[90m&lt;chr&gt;[90m[23m, air_time [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   distance [3m[90m&lt;dbl&gt;[90m[23m, hour [3m[90m&lt;dbl&gt;[90m[23m, minute [3m[90m&lt;dbl&gt;[90m[23m, time_hour [3m[90m&lt;dttm&gt;[90m[23m[39m</code></pre>
</div>
</div>
<ul>
<li>How many unique routes exists?</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608361075" aria-expanded="false" aria-controls="acc2020101608361075">
</button>
</p>
<div id="acc2020101608361075" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;%
  mutate(route=paste(origin,&quot;-&quot;,dest)) %&gt;%
  distinct(route,.keep_all=T) %&gt;%
  nrow()</code></pre>
<pre><code>## [1] 224</code></pre>
</div>
</div>
<ul>
<li>Which is the most frequent route?</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608366409" aria-expanded="false" aria-controls="acc2020101608366409">
</button>
</p>
<div id="acc2020101608366409" class="collapse">
<div class="card card-body">
<pre class="r"><code># JFK - LAX
flights %&gt;%
  mutate(route=paste(origin,&quot;-&quot;,dest)) %&gt;% 
  group_by(route) %&gt;%
  count() %&gt;%
  arrange(-n)</code></pre>
<pre><code>## [90m# A tibble: 224 x 2[39m
## [90m# Groups:   route [224][39m
##    route         n
##    [3m[90m&lt;chr&gt;[39m[23m     [3m[90m&lt;int&gt;[39m[23m
## [90m 1[39m JFK - LAX [4m1[24m[4m1[24m262
## [90m 2[39m LGA - ATL [4m1[24m[4m0[24m263
## [90m 3[39m LGA - ORD  [4m8[24m857
## [90m 4[39m JFK - SFO  [4m8[24m204
## [90m 5[39m LGA - CLT  [4m6[24m168
## [90m 6[39m EWR - ORD  [4m6[24m100
## [90m 7[39m JFK - BOS  [4m5[24m898
## [90m 8[39m LGA - MIA  [4m5[24m781
## [90m 9[39m JFK - MCO  [4m5[24m464
## [90m10[39m EWR - BOS  [4m5[24m327
## [90m11[39m EWR - SFO  [4m5[24m127
## [90m12[39m LGA - DTW  [4m5[24m040
## [90m13[39m EWR - CLT  [4m5[24m026
## [90m14[39m EWR - ATL  [4m5[24m022
## [90m15[39m EWR - MCO  [4m4[24m941
## [90m# ‚Ä¶ with 209 more rows[39m</code></pre>
</div>
</div>
</div>
<div id="transmutations" class="section level2">
<h2><span class="header-section-number">4.3</span> Trans(mutations)</h2>
<ul>
<li><code>air_time</code> is the amount of time in minutes spent in the air. Add a new column <code>air_spd</code> that will contain aircraft‚Äôs airspeed in mph</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608364726" aria-expanded="false" aria-controls="acc2020101608364726">
</button>
</p>
<div id="acc2020101608364726" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;% mutate(air_spd = distance/(air_time / 60))</code></pre>
<pre><code>## [90m# A tibble: 336,776 x 20[39m
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m     [3m[90m&lt;dbl&gt;[39m[23m    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;int&gt;[39m[23m
## [90m 1[39m  [4m2[24m013     1     1      517            515         2      830            819
## [90m 2[39m  [4m2[24m013     1     1      533            529         4      850            830
## [90m 3[39m  [4m2[24m013     1     1      542            540         2      923            850
## [90m 4[39m  [4m2[24m013     1     1      544            545        -[31m1[39m     [4m1[24m004           [4m1[24m022
## [90m 5[39m  [4m2[24m013     1     1      554            600        -[31m6[39m      812            837
## [90m 6[39m  [4m2[24m013     1     1      554            558        -[31m4[39m      740            728
## [90m 7[39m  [4m2[24m013     1     1      555            600        -[31m5[39m      913            854
## [90m 8[39m  [4m2[24m013     1     1      557            600        -[31m3[39m      709            723
## [90m 9[39m  [4m2[24m013     1     1      557            600        -[31m3[39m      838            846
## [90m10[39m  [4m2[24m013     1     1      558            600        -[31m2[39m      753            745
## [90m11[39m  [4m2[24m013     1     1      558            600        -[31m2[39m      849            851
## [90m12[39m  [4m2[24m013     1     1      558            600        -[31m2[39m      853            856
## [90m13[39m  [4m2[24m013     1     1      558            600        -[31m2[39m      924            917
## [90m14[39m  [4m2[24m013     1     1      558            600        -[31m2[39m      923            937
## [90m15[39m  [4m2[24m013     1     1      559            600        -[31m1[39m      941            910
## [90m# ‚Ä¶ with 336,761 more rows, and 12 more variables: arr_delay [3m[90m&lt;dbl&gt;[90m[23m,[39m
## [90m#   carrier [3m[90m&lt;chr&gt;[90m[23m, flight [3m[90m&lt;int&gt;[90m[23m, tailnum [3m[90m&lt;chr&gt;[90m[23m, origin [3m[90m&lt;chr&gt;[90m[23m, dest [3m[90m&lt;chr&gt;[90m[23m,[39m
## [90m#   air_time [3m[90m&lt;dbl&gt;[90m[23m, distance [3m[90m&lt;dbl&gt;[90m[23m, hour [3m[90m&lt;dbl&gt;[90m[23m, minute [3m[90m&lt;dbl&gt;[90m[23m, time_hour [3m[90m&lt;dttm&gt;[90m[23m,[39m
## [90m#   air_spd [3m[90m&lt;dbl&gt;[90m[23m[39m</code></pre>
</div>
</div>
<ul>
<li>As above, but keep only the new <code>air_spd</code> variable</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608366491" aria-expanded="false" aria-controls="acc2020101608366491">
</button>
</p>
<div id="acc2020101608366491" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;% transmute(air_spd = distance/(air_time / 60))</code></pre>
<pre><code>## [90m# A tibble: 336,776 x 1[39m
##    air_spd
##      [3m[90m&lt;dbl&gt;[39m[23m
## [90m 1[39m    370.
## [90m 2[39m    374.
## [90m 3[39m    408.
## [90m 4[39m    517.
## [90m 5[39m    394.
## [90m 6[39m    288.
## [90m 7[39m    404.
## [90m 8[39m    259.
## [90m 9[39m    405.
## [90m10[39m    319.
## [90m11[39m    414.
## [90m12[39m    382.
## [90m13[39m    430.
## [90m14[39m    426.
## [90m15[39m    324.
## [90m# ‚Ä¶ with 336,761 more rows[39m</code></pre>
</div>
</div>
</div>
<div id="groups-and-counts" class="section level2">
<h2><span class="header-section-number">4.4</span> Groups and counts</h2>
<ul>
<li>Use <code>group_by()</code>, <code>summarise()</code> and <code>n()</code> to see how many planes were delayed (departure) every month</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608362675" aria-expanded="false" aria-controls="acc2020101608362675">
</button>
</p>
<div id="acc2020101608362675" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;%
  filter(dep_delay &gt; 0) %&gt;%
  group_by(month) %&gt;%
  summarise(num_dep_delayed = n())</code></pre>
<pre><code>## [90m# A tibble: 12 x 2[39m
##    month num_dep_delayed
##    [3m[90m&lt;int&gt;[39m[23m           [3m[90m&lt;int&gt;[39m[23m
## [90m 1[39m     1            [4m9[24m662
## [90m 2[39m     2            [4m9[24m124
## [90m 3[39m     3           [4m1[24m[4m1[24m209
## [90m 4[39m     4           [4m1[24m[4m0[24m543
## [90m 5[39m     5           [4m1[24m[4m1[24m291
## [90m 6[39m     6           [4m1[24m[4m2[24m655
## [90m 7[39m     7           [4m1[24m[4m3[24m909
## [90m 8[39m     8           [4m1[24m[4m1[24m713
## [90m 9[39m     9            [4m7[24m815
## [90m10[39m    10            [4m8[24m722
## [90m11[39m    11            [4m8[24m239
## [90m12[39m    12           [4m1[24m[4m3[24m550</code></pre>
</div>
</div>
<ul>
<li>What was the mean <code>dep_delay</code> per month?</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608378852" aria-expanded="false" aria-controls="acc2020101608378852">
</button>
</p>
<div id="acc2020101608378852" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;%
  group_by(month) %&gt;%
  summarise(mean_dep_delay = mean(dep_delay, na.rm = T))</code></pre>
<pre><code>## [90m# A tibble: 12 x 2[39m
##    month mean_dep_delay
##    [3m[90m&lt;int&gt;[39m[23m          [3m[90m&lt;dbl&gt;[39m[23m
## [90m 1[39m     1          10.0 
## [90m 2[39m     2          10.8 
## [90m 3[39m     3          13.2 
## [90m 4[39m     4          13.9 
## [90m 5[39m     5          13.0 
## [90m 6[39m     6          20.8 
## [90m 7[39m     7          21.7 
## [90m 8[39m     8          12.6 
## [90m 9[39m     9           6.72
## [90m10[39m    10           6.24
## [90m11[39m    11           5.44
## [90m12[39m    12          16.6</code></pre>
</div>
</div>
<ul>
<li>Count the number of incoming delayed flights from each unique origin and sort origins by this count (descending)</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608373475" aria-expanded="false" aria-controls="acc2020101608373475">
</button>
</p>
<div id="acc2020101608373475" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;%
  filter(arr_delay &gt; 0) %&gt;%
  group_by(origin) %&gt;%
  summarise(cnt = n()) %&gt;%
  arrange(desc(cnt))</code></pre>
<pre><code>## [90m# A tibble: 3 x 2[39m
##   origin   cnt
##   [3m[90m&lt;chr&gt;[39m[23m  [3m[90m&lt;int&gt;[39m[23m
## [90m1[39m EWR    [4m5[24m[4m0[24m099
## [90m2[39m JFK    [4m4[24m[4m2[24m885
## [90m3[39m LGA    [4m4[24m[4m0[24m020</code></pre>
</div>
</div>
<ul>
<li>Use <code>summarise()</code> to sum total <code>dep_delay</code> per month in hours</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608374662" aria-expanded="false" aria-controls="acc2020101608374662">
</button>
</p>
<div id="acc2020101608374662" class="collapse">
<div class="card card-body">
<pre class="r"><code> flights %&gt;%
   group_by(month) %&gt;%
   summarize(tot_dep_delay = sum(dep_delay/60, na.rm = T))</code></pre>
<pre><code>## [90m# A tibble: 12 x 2[39m
##    month tot_dep_delay
##    [3m[90m&lt;int&gt;[39m[23m         [3m[90m&lt;dbl&gt;[39m[23m
## [90m 1[39m     1         [4m4[24m430.
## [90m 2[39m     2         [4m4[24m271.
## [90m 3[39m     3         [4m6[24m167.
## [90m 4[39m     4         [4m6[24m426.
## [90m 5[39m     5         [4m6[24m111.
## [90m 6[39m     6         [4m9[24m462.
## [90m 7[39m     7        [4m1[24m[4m0[24m315.
## [90m 8[39m     8         [4m6[24m062.
## [90m 9[39m     9         [4m3[24m039.
## [90m10[39m    10         [4m2[24m982.
## [90m11[39m    11         [4m2[24m449.
## [90m12[39m    12         [4m7[24m490.</code></pre>
</div>
</div>
<ul>
<li>Run <code>group_size()</code> on <code>carrier</code> what does it return?</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608376756" aria-expanded="false" aria-controls="acc2020101608376756">
</button>
</p>
<div id="acc2020101608376756" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;%
    group_by(carrier) %&gt;%
    group_size()</code></pre>
<pre><code>##  [1] 18460 32729   714 54635 48110 54173   685  3260   342 26397    32 58665
## [13] 20536  5162 12275   601</code></pre>
</div>
</div>
<ul>
<li>Use <code>n_groups()</code> to check the number of unique origin-carrier pairs,</li>
</ul>
<p>
<button class="btn btn-sm btn-primary btn-collapse btn-collapse-normal collapsed" type="button" data-toggle="collapse" data-target="#acc2020101608378296" aria-expanded="false" aria-controls="acc2020101608378296">
</button>
</p>
<div id="acc2020101608378296" class="collapse">
<div class="card card-body">
<pre class="r"><code>flights %&gt;%
    group_by(carrier) %&gt;%
    n_groups()</code></pre>
<pre><code>## [1] 16</code></pre>
</div>
</div>
<p><strong>Note on <code>ungroup</code></strong> Depending on the version of <code>dplyr</code> you may or may need to use the <code>ungroup()</code> if you want to group your data on some other variables. In the newer versions, <code>summarise</code> and <code>mutate</code> drop one aggregation level.</p>
</div>
</div>


<footer class="footer">
<div class="container footer-container">
<div class="row">
  
<div class="col-sm-8" style="text-align:left;vertical-align:middle;">
<p class="small" style="color:#bdbdbd;">
<b>2020</b> ‚Ä¢ NBIS ‚Ä¢ SciLifeLab
</p>
</div>

<div class="col-sm-4" style="text-align:right;vertical-align:middle;">
<p style="color:#bdbdbd;">
<span>
  <span class="footericon" style="padding-right:4px; padding-left:4px">
    <a href="https://nbis.se/">
      <svg style="height:0.8em;top:.04em;position:relative;fill:#bdbdbd;" viewBox="0 0 496 512"><path d="M248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm82.29 357.6c-3.9 3.88-7.99 7.95-11.31 11.28-2.99 3-5.1 6.7-6.17 10.71-1.51 5.66-2.73 11.38-4.77 16.87l-17.39 46.85c-13.76 3-28 4.69-42.65 4.69v-27.38c1.69-12.62-7.64-36.26-22.63-51.25-6-6-9.37-14.14-9.37-22.63v-32.01c0-11.64-6.27-22.34-16.46-27.97-14.37-7.95-34.81-19.06-48.81-26.11-11.48-5.78-22.1-13.14-31.65-21.75l-.8-.72a114.792 114.792 0 0 1-18.06-20.74c-9.38-13.77-24.66-36.42-34.59-51.14 20.47-45.5 57.36-82.04 103.2-101.89l24.01 12.01C203.48 89.74 216 82.01 216 70.11v-11.3c7.99-1.29 16.12-2.11 24.39-2.42l28.3 28.3c6.25 6.25 6.25 16.38 0 22.63L264 112l-10.34 10.34c-3.12 3.12-3.12 8.19 0 11.31l4.69 4.69c3.12 3.12 3.12 8.19 0 11.31l-8 8a8.008 8.008 0 0 1-5.66 2.34h-8.99c-2.08 0-4.08.81-5.58 2.27l-9.92 9.65a8.008 8.008 0 0 0-1.58 9.31l15.59 31.19c2.66 5.32-1.21 11.58-7.15 11.58h-5.64c-1.93 0-3.79-.7-5.24-1.96l-9.28-8.06a16.017 16.017 0 0 0-15.55-3.1l-31.17 10.39a11.95 11.95 0 0 0-8.17 11.34c0 4.53 2.56 8.66 6.61 10.69l11.08 5.54c9.41 4.71 19.79 7.16 30.31 7.16s22.59 27.29 32 32h66.75c8.49 0 16.62 3.37 22.63 9.37l13.69 13.69a30.503 30.503 0 0 1 8.93 21.57 46.536 46.536 0 0 1-13.72 32.98zM417 274.25c-5.79-1.45-10.84-5-14.15-9.97l-17.98-26.97a23.97 23.97 0 0 1 0-26.62l19.59-29.38c2.32-3.47 5.5-6.29 9.24-8.15l12.98-6.49C440.2 193.59 448 223.87 448 256c0 8.67-.74 17.16-1.82 25.54L417 274.25z"></path>
      </svg>
    </a>
    </span>
    <span class="footericon" style="padding-right:4px; padding-left:4px">
      <a href="https://twitter.com/NBISwe"><svg style="height:0.8em;top:.04em;position:relative;fill:#bdbdbd;" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path>
    </svg>
    </a>
    </span>
    <span class="footericon" style="padding-left:4px">
      <a href="https://www.linkedin.com/company/nbisweden/">
        <svg style="height:0.8em;top:.04em;position:relative;fill:#bdbdbd;" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path>
        </svg>
    </a>
    </span>
  </span>
</p>
</div>

</div>
</div>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
